<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEBUG MODE: CEK STOK üõ†Ô∏è</title>
    <style>
        body { background: #0f172a; color: white; font-family: sans-serif; padding: 20px; }
        .container { max-width: 480px; margin: 0 auto; }
        
        .card {
            background: #1e293b; border: 1px solid #334155; border-radius: 12px;
            padding: 20px; margin-bottom: 20px;
        }
        .title { font-weight: bold; font-size: 1.1em; margin-bottom: 10px; }
        
        /* === STOCK BAR STYLES (YANG KITA UJI) === */
        .stock-container { margin-top: 15px; }
        
        .stock-bg {
            height: 10px; width: 100%;
            background: #334155; /* Warna Track Gelap */
            border-radius: 5px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }
        
        .stock-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 1s ease;
            /* Default Gradient (Akan di-override JS) */
            background: linear-gradient(90deg, #ef4444, #f59e0b); 
        }

        /* WARNA DINAMIS BERDASARKAN KELAS */
        .fill-high { background: #22c55e !important; } /* Hijau */
        .fill-med  { background: #f59e0b !important; } /* Kuning */
        .fill-low  { background: #ef4444 !important; } /* Merah */

        .stock-text {
            display: flex; justify-content: space-between;
            font-size: 0.8em; margin-top: 8px; font-weight: bold;
        }
        
        .text-high { color: #22c55e; }
        .text-med  { color: #f59e0b; }
        .text-low  { color: #ef4444; }

        .debug-label {
            background: #333; color: #aaa; font-size: 0.7em; 
            padding: 5px; margin-bottom: 10px; display: inline-block; border-radius: 4px;
        }
    </style>
</head>
<body>

    <div class="container" id="productList">
        </div>

    <script>
        // === 1. DATA DUMMY (PENGGANTI CSV) ===
        // Kita hardcode angka stoknya untuk memastikan logika visual benar
        const DUMMY_DATA = [
            {
                nama: "TEST 1: Stok Aman",
                stok: 85, // Angka Persen
                desc: "Harus Bar HIJAU panjang"
            },
            {
                nama: "TEST 2: Stok Sedang",
                stok: 45,
                desc: "Harus Bar KUNING setengah"
            },
            {
                nama: "TEST 3: Stok Kritis",
                stok: 12,
                desc: "Harus Bar MERAH pendek"
            },
            {
                nama: "TEST 4: Stok Error (String)",
                stok: "5", // Test jika data berupa string
                desc: "Harus tetap jalan (Bar Merah sangat pendek)"
            }
        ];

        // === 2. FUNGSI RENDER ===
        function renderDummy() {
            const container = document.getElementById('productList');
            container.innerHTML = '';

            DUMMY_DATA.forEach(item => {
                // Pastikan stok dibaca sebagai Angka (Integer)
                const stockVal = parseInt(item.stok) || 0; 

                // LOGIKA WARNA (Color Logic)
                let colorClass = 'fill-high';
                let textClass = 'text-high';
                let statusText = 'Stok Tersedia';

                if (stockVal < 20) {
                    colorClass = 'fill-low';
                    textClass = 'text-low';
                    statusText = 'üî• Segera Habis!';
                } else if (stockVal < 50) {
                    colorClass = 'fill-med';
                    textClass = 'text-med';
                    statusText = '‚ö†Ô∏è Stok Terbatas';
                }

                // Render HTML
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="debug-label">Input Data: ${item.stok}% (${item.desc})</div>
                    <div class="title">${item.nama}</div>
                    
                    <div class="stock-container">
                        <div class="stock-bg">
                            <div class="stock-fill ${colorClass}" style="width: ${stockVal}%"></div>
                        </div>
                        <div class="stock-text ${textClass}">
                            <span>${statusText}</span>
                            <span>${stockVal}% Tersisa</span>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // Jalankan
        renderDummy();

    </script>
</body>
</html>
